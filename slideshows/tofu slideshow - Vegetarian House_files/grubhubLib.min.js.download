var ButtonConfiguration=function(a,b,c){function d(a,b){return"branded"===a?j[b]:"unbranded"}function e(a,b){return"unbranded"===a?"order online":j[b]?"order on "+j[b]:"order online"}function f(a,b,c,d){var e="noImage";return"branded"===a?c in o[b][d]&&(e=o[b][d][c].img):"custom"===d?e="custom":c in p[d]&&(e=p[d][c].img),e}function g(a,b,c,d,e,f,g,h,i){if("1.0"===c){var j="/"+encodeURIComponent(a)+"/"+d+"?classicAffiliateId="+encodeURIComponent("/r/w/"+b+"/");a=("sml"===e?l:k)+j}return"undefined"!=typeof f&&(a+=(c?"&":"?")+"utm_source="+encodeURIComponent(f)+"&utm_medium="+encodeURIComponent(g)+"&utm_campaign="+encodeURIComponent(h)+"&utm_content="+encodeURIComponent(i)),a}function h(a){var b={};return a.substr(1).split("&").forEach(function(a){var c=a.split("=");b[c[0]]="undefined"==typeof c[1]?"":decodeURIComponent(c[1])}),b}function i(a,b){var c=parseInt(a.slice(1),16),d=0>b?0:255,e=0>b?-1*b:b,f=c>>16,g=c>>8&255,h=255&c;return"#"+(16777216+65536*(Math.round((d-f)*e)+f)+256*(Math.round((d-g)*e)+g)+(Math.round((d-h)*e)+h)).toString(16).slice(1)}var j={sml:"seamless",gh:"grubhub"},k=c.ghUrl+"/restaurant",l=c.smlUrl+"/menu",m=["gh","sml"],n=["small","large","custom"],o={gh:{small:{red:{img:"/iframeButton/images/small_gh_red.png"},white:{img:"/iframeButton/images/small_gh_white.png"}},large:{red:{img:"/iframeButton/images/large_gh_red.png"},white:{img:"/iframeButton/images/large_gh_white.png"}}},sml:{small:{red:{img:"/iframeButton/images/small_sl_red.png"},white:{img:"/iframeButton/images/small_sl_white.png"}},large:{red:{img:"/iframeButton/images/large_sl_red.png"},white:{img:"/iframeButton/images/large_sl_white.png"}}}},p={small:{red:{img:"/iframeButton/images/small_red.png"},white:{img:"/iframeButton/images/small_white.png"}},large:{red:{img:"/iframeButton/images/large_red.png"},white:{img:"/iframeButton/images/large_white.png"}}},q=h(a);if(this.buttonType=q["button-type"],this.linkType=q["link-type"],this.buttonColor=q["button-color"],this.buttonSize=q["button-size"],this.customerID=q["customer-id"],this.restaurantName=q["restaurant-name"],this.restaurantAddress=q["restaurant-address"],this.linkUrl=q["link-url"],this.trackingID=q["tracking-id"],this.version=q.version,this.targetWindow=q.target,this.customStyle=q.customStyle?q.customStyle:"no-custom-style",b&&(this.utm_source=b.split("/")[2],this.utm_medium="OOL",this.utm_campaign=e(this.linkType),this.utm_content=this.customerID),this.buttonSize=-1!==n.indexOf(this.buttonSize)?this.buttonSize:"large",this.linkType=-1!==m.indexOf(this.linkType)?this.linkType:"gh",this.buttonImage=f(this.buttonType,this.linkType,this.buttonColor,this.buttonSize),this.buttonLink="no-url"!==this.linkUrl?g(this.linkUrl,this.trackingID,this.version,this.customerID,this.linkType,this.utm_source,this.utm_medium,this.utm_campaign,this.utm_content):"/",this.restaurantid=this.customerID,this.userIdKey="12345678",this.eventaction=e(this.buttonType,this.linkType),this.eventlabel=this.buttonLink,this.creativeType=d(this.buttonType,this.linkType),0,0,0,/^#[0-9a-fA-F]{6}:#[0-9a-fA-F]{6}$/.test(this.buttonColor)){var r=this.buttonColor.split(":");this.backgroundColor=r[0],this.textColor=r[1]}else this.backgroundColor="#CF0A2C",this.textColor="#FFFFFF";this.shadedBackgroundColor=i(this.backgroundColor,-.37)},buttonConfig=new ButtonConfiguration(window.location.search,document.referrer,GhConfig);"noImage"!==buttonConfig.buttonImage&&"custom"!==buttonConfig.buttonImage?($("#gh-button button").addClass("hidden"),document.getElementById("buttonImg").src=buttonConfig.buttonImage,$("#gh-button img").addClass("size-"+buttonConfig.buttonSize),$("#gh-button #buttonImg").removeClass("hidden")):"custom"===buttonConfig.buttonImage?"no-custom-style"!==buttonConfig.customStyle&&$("head").append('<link rel="stylesheet" href="'+buttonConfig.customStyle+'" type="text/css" onerror="cssLoadError();"/>'):($("#gh-button button").addClass("unbranded size-"+buttonConfig.buttonSize),$("#gh-button button").css("color",buttonConfig.textColor),$("#gh-button button").css("backgroundColor",buttonConfig.backgroundColor),"#ffffff"==buttonConfig.backgroundColor.toLowerCase()?$("#gh-button button").css("borderColor","#979797"):$("#gh-button button").css("borderColor",buttonConfig.backgroundColor),$("#gh-button button").hover(function(){"#ffffff"==buttonConfig.backgroundColor.toLowerCase()?$("#gh-button button").css("borderColor","#636363"):($(this).css("backgroundColor",buttonConfig.shadedBackgroundColor),$("#gh-button button").css("borderColor",buttonConfig.shadedBackgroundColor))},function(){"#ffffff"==buttonConfig.backgroundColor.toLowerCase()?$("#gh-button button").css("borderColor","#979797"):($(this).css("backgroundColor",buttonConfig.backgroundColor),$("#gh-button button").css("borderColor",buttonConfig.backgroundColor))})),$("#gh-button").attr("title",buttonConfig.restaurantName),0,0;var redirectOnClick=function(a,b){var c=["_blank","_parent","_top"];-1!==c.indexOf(b)?window.open(a,b):window.top.location.href=a},cssLoadError=function(){$(function(){$("#gh-button").hide(),$("#gh-error").show()})};window._csq=window._csq||{},window._csq.platform="newgrubhub",window._csq.userIdKey=buttonConfig.userIdKey;var utag_data={pageGroup:"lead generation",subGroup:"online ordering links (OOLs)",brand:"restaurant branded",businesstype:"consumer",restaurantid:buttonConfig.restaurantid,creativetype:buttonConfig.creativeType,teal_event_type:"view"};0,0;var tealiumOnClickTrack=function(){var a={eventcategory:"exit links to "+("sml"===buttonConfig.linkType?"seamless":"grubhub"),eventaction:buttonConfig.eventaction,eventlabel:buttonConfig.eventlabel};0,utag.link(a)};$("#gh-button").on("click",function(){var a=setInterval(function(){tealiumOnClickTrack(),clearInterval(a)},0);redirectOnClick(buttonConfig.buttonLink,buttonConfig.targetWindow)});